{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load staticfiles %}

{% block head_title %}Welcome | {{ block.super }}{% endblock %}
<style>
{% block style %}

.navbar-static-top {
	margin-bottom: 0px !important;
}

.jumbotron {
	{% if featured_image.make_image_background %} 
	background-image: url("{{ featured_image.image.url }}");
	background-repeat: no-repeat;
	background-size: cover;
	background-position-y: -110px;
	{% endif %}
}

{% endblock %}
</style>


<script>
{% block jquery %}
$(".item-qty").change(function(){
  // $(this).next(".btn-update").fadeIn();

  // event.preventDefault();
  // .prev(h1)
  var item = $(this).prev("input[type='hidden']").val();
  var qty = $(this).val()
  var data = {
    item: item,
    qty: qty
  }
  console.log(data);
  $.ajax({
    type: "GET", // "POST"
    url: "{% url 'cart' %}",
    data: data,
    success: function(data) {
      $("#jquery-message").text("Added " + data.item_added + " Deleted " + data.deleted)
      if (data.deleted){
        $("#item-"+item).fadeOut();
        $("#subtotal").text(data.subtotal);
        $("#taxtotal").text(data.tax_total);
        $("#carttotal").text(data.cart_total);
      } else {
        $("#item-line-total-"+item).text(data.line_total);
        $("#subtotal").text(data.subtotal);
        $("#taxtotal").text(data.tax_total);
        $("#carttotal").text(data.cart_total);
      }

      if (data.total_items == 0 ) {
        $(".table").fadeOut()
        var template = "{% include 'carts/empty_cart.html' %}";
        $(".main-content").html(template);

      }

      var message = ""
      if (data.item_added) {
        message = "New item added"
      } else if (data.deleted){
        message = "Item removed"
      } else {
        message = "Item updated"
      }
      showFlashMessage(message);
      updateCartItemCount()
      }, 
    error: function(response, error) {
      // console.log(response)
      // console.log(error)
      $("#add-form").submit()
    }
  })


});

{% endblock %}
</script>











     
{% block jumbotron %}

	{% if featured_image %}
		<div class="jumbotron" >
		 <div class="container">
			<div class="row">
				<div class='col-sm-12 text-center {% if featured_image.text_right %} pull-right {% endif %}'>
				<h1 style="color:#fff;">{{ featured_image.product.title }}</h1>
				<p style="color:#fff;">{{ featured_image.product.description }}</p>
				<p>
				<a class="btn btn-lg btn-primary" href="{{ featured_image.product.get_absolute_url }}" role="button">More Details </a>
				</p>
				</div>
				{% if not featured_image.make_image_background %} 
				<div class='col-sm-6' >
					<img src="{{ featured_image.image.url }}" class='img-responsive' />
		 		</div>
		 		{% endif %}
				</div>
			</div>
		 </div>


	{% else %}
	<div class="jumbotron">
	 <div class="container">
		<div class="row">
			<div class='col-sm-6'>
			<h1>Try Django 1.8</h1>
			<p>The MVP Landing project is designed to get your project started. The goal is to help you launch as soon as possible with the least amount of investment using time or money. Join Us today.</p>
			<p>
			<a class="btn btn-lg btn-primary" href="" role="button">Join Us &raquo;</a>
			</p>
			</div>
			<div class='col-sm-6' >
				<iframe width="560" height="315" src="https://www.youtube.com/embed/2uLYO1LUf6Q" frameborder="0" allowfullscreen></iframe>

	 		</div>
			</div>
		</div>
	 </div>

	 {% endif %}


{% endblock %}




{% block content %}
<div class="row">
<div class="col-md-12 text-center">
<h2><b> SMART EDUCATIONAL MARKET PLACE. </b></h2> <hr>
</div>
</div><br> <br>

<div class='row'>
<div class="col-md-9">
<h3>New curriculum books allowed by REB </h3>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
  </ol>

    <div class="carousel-inner" role="listbox">
    <div class="item active">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>

    <div class="item">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>
   </div>
</div>
</div>
<div class="col-md-3 text-center">

<!-- Please heart it if you like! -->

<!-- Please heart it if you like! -->
      <br>
     <h3><b> Get Offline application </b></h3>
      &nbsp; &nbsp;<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRTZzrKdmVs6DMpxAq3MuyBNznWFgjYKL5fQv92AhSY6Y_HwdP1mQ" alt="The card middle" class="img-responsive img-rounded" id="card-image" class="img-responsive" style="width:122px; margin-left: 70px;">  
     <h2><b>S.E.M</b></h2>
    <button class="btn btn-success"> Download </button>

</div>
</div>




<div class='row'>
<div class="col-md-12">
<h3>Universities books allowed by REB </h3>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
  </ol>

    <div class="carousel-inner" role="listbox">
    <div class="item active">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>

    <div class="item">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}

    </div>
   </div>
</div>
</div>
</div>




<div class='row'>
<h3>Secondary school books allowed by REB </h3>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
  </ol>

    <div class="carousel-inner" role="listbox">
    <div class="item active">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>

    <div class="item">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>
   </div>
</div>
</div>






<div class='row'>
<h3>Primary books allowed by REB </h3>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
  </ol>

    <div class="carousel-inner" role="listbox">
    <div class="item active">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>

    <div class="item">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>
   </div>
</div>
</div>




<div class='row'>
<h3>Kindergarten books allowed by REB </h3>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
  </ol>

    <div class="carousel-inner" role="listbox">
    <div class="item active">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>

    <div class="item">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>
   </div>
</div>
</div>






<div class='row'>
<h3>Univercities books allowed by REB </h3>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
  </ol>

    <div class="carousel-inner" role="listbox">
    <div class="item active">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>

    <div class="item">
    {% include "products/products.html" with object_list=products col_class_set="col-sm-2" %}
    </div>
   </div>
</div>
</div>


<div class='row'>
<h3>Featured Books</h3>
{% include "products/products.html" with object_list=products2 %}

</div>


<!-- 
 {% if request.user.is_authenticated %}
<h1>You are logged in!</h1>

	{% if queryset %}
	<h2>Welcome Staff</h2>
	<table class='table'>
	{% for instance in queryset %}
		<tr><td>{{ forloop.counter }}</td><td>{{ instance.email }}</td><td>{{ instance.full_name }}</td><td>{{ instance.timestamp|timesince }} ago</td></tr>
		{% if instance.email == "abc@gmail.edu" %}
		<tr><td>is equal</td></tr>
		{% endif %}
	{% endfor %}
	</table>

	{% endif %}

 {% else %}
<div class="row">

  <div class="col-sm-3 pull-right">
  	
			<p class='lead text-align-center'>{{ title }}</p>

			<form method='POST' action=''>{% csrf_token %}
			{{ form|crispy }}

			<input class='btn btn-primary' type='submit' value='Sign Up' />

			</form>
	</div>

	<div class='col-sm-3'>
<p class='lead text-align-center'>Django &amp; Bootstrap</p>
			<img src='{% static "img/marketing1.jpg" %}' class='img-responsive' />
</div>

<div class='col-sm-3'>
<p class='lead text-align-center'>Created for Starters 
<br/>
<span class='fa-stack fa-lg fa-5x'>
<i class='fa fa-comment-o fa-stack-2x'></i>
<i style='color:yellow;' class="fa fa-bolt fa-stack-1x"></i>

</span>
</p>

</div>

<div class='col-sm-3'>
<p class='lead text-align-center'>Always Open Source <br/><br/>

<span class="fa-stack fa-lg fa-5x">
<i class="fa fa-circle-o-notch fa-stack-2x"></i>

  <i class="fa fa-github fa-stack-1x"></i>
</span>
</p>


</div>


</div>
{% endif %} -->

{% endblock %}